<!DOCTYPE html>
<html>
<head>
    <title>新建关卡</title>
    <link rel="stylesheet" href="https://blog.anecrow.work/css/layout.css">
    <link rel="stylesheet" href="https://blog.anecrow.work/css/github-markdown.css">
    <link rel="stylesheet" href="https://blog.anecrow.work/css/style.css">
</head>

<body class="markdown-body">
    <div class="flex-container">
        <div class="side-container">
            

    


<nav id="side-nav">
    <a href="https://blog.anecrow.work/">
        <h1>Home</h1>
    </a>
    <a href="https://blog.anecrow.work/unreal_engine/lyra/">
        <h3>Lyra框架</h3>
    </a>
    
        
            
                <a href="https://blog.anecrow.work/unreal_engine/lyra/classes/">
                    <span class="nav-item">
                        类参考目录
                    </span>
                </a>
            
            
                
                    <a href="https://blog.anecrow.work/unreal_engine/lyra/classes/lyrauserfacingexperiencedefinition/">
                        <code class="nav-item nav-subitem">
                            LyraUserFacingExperienceDefinition
                        </code>
                    </a>
                
            
                
                    <a href="https://blog.anecrow.work/unreal_engine/lyra/classes/lyraexperiencedefinition/">
                        <code class="nav-item nav-subitem">
                            LyraExperienceDefinition
                        </code>
                    </a>
                
            
                
                    <a href="https://blog.anecrow.work/unreal_engine/lyra/classes/lyrapawndata/">
                        <code class="nav-item nav-subitem">
                            LyraPawnData
                        </code>
                    </a>
                
            
                
                    <a href="https://blog.anecrow.work/unreal_engine/lyra/classes/lyracontrollercomponent_characterparts/">
                        <code class="nav-item nav-subitem">
                            LyraControllerComponent_CharacterParts
                        </code>
                    </a>
                
            
                
                    <a href="https://blog.anecrow.work/unreal_engine/lyra/classes/gamefeaturedata/">
                        <code class="nav-item nav-subitem">
                            GameFeatureData
                        </code>
                    </a>
                
            
        
            
                <a href="https://blog.anecrow.work/unreal_engine/lyra/resouce_manage/">
                    <span class="nav-item">
                        资源管理
                    </span>
                </a>
            
            
                
                    <a href="https://blog.anecrow.work/unreal_engine/lyra/resouce_manage/new_gamefeatuer/">
                        <code class="nav-item nav-subitem">
                            新建项目层级
                        </code>
                    </a>
                
            
                
                    <a href="https://blog.anecrow.work/unreal_engine/lyra/resouce_manage/asset_scan/">
                        <code class="nav-item nav-subitem">
                            资产扫描
                        </code>
                    </a>
                
            
                
                    <a href="https://blog.anecrow.work/unreal_engine/lyra/resouce_manage/actions/">
                        <code class="nav-item nav-subitem">
                            自动注入
                        </code>
                    </a>
                
            
        
            
                <a href="https://blog.anecrow.work/unreal_engine/lyra/maps/">
                    <span class="nav-item">
                        关卡设计
                    </span>
                </a>
            
            
                
                    <code class="nav-item nav-subitem nav-current">
                        新建关卡
                    </code>
                
            
        
            
                <a href="https://blog.anecrow.work/unreal_engine/lyra/pawns/">
                    <span class="nav-item">
                        Pawns
                    </span>
                </a>
            
            
                
                    <a href="https://blog.anecrow.work/unreal_engine/lyra/pawns/character_parts/">
                        <code class="nav-item nav-subitem">
                            角色配饰
                        </code>
                    </a>
                
            
        
    
</nav>
        </div>
        <div id="main-container" class="flex-container">
            <div id="content">
                
<header>
    <h1>新建关卡</h1>
    <nav class="breadcrumbnav">
    
    
        
    
        
    
        
    
        
    

    
        <span>
            <a href="https://blog.anecrow.work/">
                <code>Home</code>
            </a>
        </span>
        <span>></span>
    

    

    
        <span>
            <a href="https://blog.anecrow.work/unreal_engine/">
                <code>Unreal Engine</code>
            </a>
        </span>
        <span>></span>
    

    

    
        <span>
            <a href="https://blog.anecrow.work/unreal_engine/lyra/">
                <code>Lyra框架</code>
            </a>
        </span>
        <span>></span>
    

    

    
        <span>
            <a href="https://blog.anecrow.work/unreal_engine/lyra/maps/">
                <code>关卡设计</code>
            </a>
        </span>
        <span>></span>
    

    

    
        <code>新建关卡</code>
    

</nav>


    <blockquote id="page-info">
        <span><code>Date</code>: 2022/07/17 16:21:17</span>
        <span><code>Lastmod</code>: 2022/07/18 12:58:36</span>
        <br>
        
            <span><code>WordCount</code>: 581</span>
            <span><code>ReadingTime</code>: 2min</span>
        
    </blockquote>
</header>
                <article>
                    
    <article>
        <h2 id="新建关卡">新建关卡</h2>
<p>新建关卡的操作与原生没有区别<br>
<strong>文件</strong> &gt; <strong>新建关卡</strong> &gt; <strong>Basic</strong></p>
<p>通常将地图资源<strong>保存</strong>在 <code>/Maps</code> 文件夹中</p>
<blockquote>
<p>此时 <strong>运行关卡</strong> 会发现虽然我们什么都没设置, 但依然有一个可以操作移动的简易角色</p>
<p>而打开关卡中的 <strong>世界场景设置</strong><br>
找到  <strong>游戏模式</strong> &gt; <strong>Default Gameplay Experience</strong> &gt; <strong>Default Gameplay Experience</strong><br>
<strong>修改值</strong>为 <code>B_LyraShooterGame_ControlPoints</code></p>
<p>再次运行会得到和 <code>ShooterGame</code> 一样的对战模式:<br>
拥有基本射击游戏功能的可操控角色, 和自动生成的AI角色(但不会移动)</p>
<blockquote>
<p><img src="Snipaste_2022-07-17_16-36-34.jpg" alt="设置"><br>
很显然 <em>Lyra框架</em> 替换了原版 <code>GameMode</code> 系统<br>
而改用自建的一套 <code>Gameplay Experience</code> 系统<br>
TODO: [站内文章: 游戏性](../experience)</p>
</blockquote>
</blockquote>
<h2 id="配置文件">配置文件</h2>
<ul>
<li>类型: <code>LyraUserFacingExperienceDefinition</code>
<ul>
<li><a href="../../classes/lyrauserfacingexperiencedefinition">站内文章: LyraUserFacingExperienceDefinition</a></li>
</ul>
</li>
</ul>
<p>简单来说这是 <em>Lyra框架</em> 定义的一个关卡信息类<br>
储存了关卡资产对象位置, 还有关卡封面等信息<br>
是 <em>Map</em> 对象的包装拓展</p>
<blockquote>
<p>入口关卡通过该扫描配置类对象列出并载入关卡<br>
使得 小型/副本式/遭遇战类 的关卡可以被自动检索与展示信息</p>
</blockquote>
<h3 id="新建">新建</h3>
<p><strong>添加</strong> &gt; <strong>其他</strong> &gt; <strong>数据资产</strong><br>
<img src="Snipaste_2022-07-17_20-09-13.jpg" alt="添加"><br>
<strong>选择</strong> <code>LyraUserFacingExperienceDefinition</code></p>
<p>通常将关卡配置<strong>保存</strong>在 <code>/System/Playlists</code> 文件夹中</p>
<h3 id="修改">修改</h3>
<blockquote>
<p>参数详见 <a href="../../classes/lyrauserfacingexperiencedefinition">站内文章: LyraUserFacingExperienceDefinition</a></p>
</blockquote>
<p>关键参数有两个</p>
<ul>
<li><code>Map ID</code></li>
<li><code>Experience ID</code></li>
</ul>
<p>分别指定了关卡和游戏性资源</p>
<blockquote>
<p>当指定了 <code>Experience ID</code> 时<br>
地图或项目默认游戏性将会被覆盖</p>
</blockquote>
<p>其他参数影响可以参考 <code>Shooter</code> 中的示例关卡配置<br>
<img src="Snipaste_2022-07-18_12-35-09.jpg" alt="配置"></p>
<h3 id="使用">使用</h3>
<p>在新建的 <code>GameFeature</code> 层级中可能会无法找到对应资产</p>
<p>需要在插件配置中指定资产扫描 <a href="../../resouce_manage/asset_scan">站内文章: 资产扫描</a></p>
<blockquote>
<p>典型扫描配置</p>
<ul>
<li><a href="../../resouce_manage/asset_scan/#%E5%85%B3%E5%8D%A1%E9%85%8D%E7%BD%AE">站内文章: 关卡配置</a></li>
<li><a href="../../resouce_manage/asset_scan/#%E6%B8%B8%E6%88%8F%E6%80%A7%E9%85%8D%E7%BD%AE">站内文章: 游戏性配置</a></li>
<li><a href="../../resouce_manage/asset_scan/#%E5%85%B3%E5%8D%A1%E8%B5%84%E6%BA%90">站内文章: 关卡资源</a></li>
</ul>
<p>三合一数组快捷参数</p>
<div class="highlight"><pre tabindex="0" style="color:#2f1e2e;background-color:#e7e9db;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>((PrimaryAssetType<span style="color:#5bc4bf">=</span><span style="color:#48b685">&#34;LyraUserFacingExperienceDefinition&#34;</span>,AssetBaseClass<span style="color:#5bc4bf">=</span><span style="color:#48b685">&#34;/Script/LyraGame.LyraUserFacingExperienceDefinition&#34;</span>,Directories<span style="color:#5bc4bf">=</span>((Path<span style="color:#5bc4bf">=</span><span style="color:#48b685">&#34;/System/Playlists&#34;</span>)),Rules<span style="color:#5bc4bf">=</span>(CookRule<span style="color:#5bc4bf">=</span>AlwaysCook)),(PrimaryAssetType<span style="color:#5bc4bf">=</span><span style="color:#48b685">&#34;LyraExperienceDefinition&#34;</span>,AssetBaseClass<span style="color:#5bc4bf">=</span><span style="color:#48b685">&#34;/Script/LyraGame.LyraExperienceDefinition&#34;</span>,bHasBlueprintClasses<span style="color:#5bc4bf">=</span>True,Directories<span style="color:#5bc4bf">=</span>((Path<span style="color:#5bc4bf">=</span><span style="color:#48b685">&#34;/System/Experiences&#34;</span>)),Rules<span style="color:#5bc4bf">=</span>(CookRule<span style="color:#5bc4bf">=</span>AlwaysCook)),(PrimaryAssetType<span style="color:#5bc4bf">=</span><span style="color:#48b685">&#34;Map&#34;</span>,AssetBaseClass<span style="color:#5bc4bf">=</span><span style="color:#48b685">&#34;/Script/Engine.World&#34;</span>,Directories<span style="color:#5bc4bf">=</span>((Path<span style="color:#5bc4bf">=</span><span style="color:#48b685">&#34;/Maps&#34;</span>))))
</span></span></code></pre></div></blockquote>
<p>添加关卡配置扫描之后, 就能在入口关卡看到<br>
<img src="Snipaste_2022-07-18_12-19-41.jpg" alt="关卡"></p>
<p>同时添加游戏性配置和关卡资源扫描之后, 就能使用对应路径下的自定义资产<br>
<img src="Snipaste_2022-07-18_12-24-26.jpg" alt="资产"></p>
    </article>

                </article>
                <footer>
    <div class="flex-container">
        <div>
            
    

        </div>
        <div></div>
        <div>
            
    

        </div>
    </div>
    <hr>
    <div>
        <small><small><strong style="margin: -4px 0;">©2022 aneCrow All Rights Reserved.</strong></small></small>
        <br/>
        <span class="footnotes" style="padding-bottom: var(--gap-unit)">Power by: <a href="https://gohugo.io/">HUGO</a> | Support <strong>Light</strong>&<strong>Dark</strong> Style</span>
    </div>
</footer>


            </div>
        </div>
        <div class="side-container">
            <aside>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#新建关卡">新建关卡</a></li>
    <li><a href="#配置文件">配置文件</a>
      <ul>
        <li><a href="#新建">新建</a></li>
        <li><a href="#修改">修改</a></li>
        <li><a href="#使用">使用</a></li>
      </ul>
    </li>
  </ul>
</nav>
</aside>
        </div>
        <div></div>
    </div>
</body>

</html>